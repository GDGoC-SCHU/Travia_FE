import{RouterProvider as F,Link as N,createRootRoute as P,Outlet as E,HeadContent as M,Scripts as O,createFileRoute as H,lazyRouteComponent as $,createRouter as z}from"@tanstack/react-router";import{jsx as n,jsxs as f}from"react/jsx-runtime";import*as h from"@radix-ui/react-navigation-menu";import{cva as A}from"class-variance-authority";import{clsx as k}from"clsx";import{twMerge as D}from"tailwind-merge";import{isPlainObject as G,encode as I,isRedirect as J,isNotFound as L}from"@tanstack/router-core";import{startSerializer as l,mergeHeaders as x,createServerFn as W}from"@tanstack/start-client-core";import{defineHandlerCallback as B,transformReadableStreamWithRouter as U,transformPipeableStreamWithRouter as V,getHeaders as Q,getEvent as X,createStartHandler as K}from"@tanstack/start-server-core";import Y from"tiny-invariant";import{PassThrough as Z}from"node:stream";import{isbot as y}from"isbot";import m from"react-dom/server";function b(e){return n(F,{router:e.router})}const q=B(async({request:e,router:t,responseHeaders:a})=>{if(typeof m.renderToReadableStream=="function"){const r=await m.renderToReadableStream(n(b,{router:t}),{signal:e.signal});y(e.headers.get("User-Agent"))&&await r.allReady;const s=U(t,r);return new Response(s,{status:t.state.statusCode,headers:a})}if(typeof m.renderToPipeableStream=="function"){const r=new Z;try{const i=m.renderToPipeableStream(n(b,{router:t}),{...y(e.headers.get("User-Agent"))?{onAllReady(){i.pipe(r)}}:{onShellReady(){i.pipe(r)}},onError:(d,o)=>{console.error("Error in renderToPipeableStream:",d,o)}})}catch(i){console.error("Error in renderToPipeableStream:",i)}const s=V(t,r);return new Response(s,{status:t.state.statusCode,headers:a})}throw new Error("No renderToReadableStream or renderToPipeableStream found in react-dom/server. Ensure you are using a version of react-dom that supports streaming.")}),ee=()=>({routes:{__root__:{filePath:"__root.tsx",children:["/"],preloads:["/_build/assets/client-Bh3r8OwQ.js","/_build/assets/client-CmE2CNt8.js"]},"/":{filePath:"index.tsx"}}});function te(e){return globalThis.MANIFEST[e]}function ne(){const e=ee(),t=e.routes.__root__=e.routes.__root__||{};t.assets=t.assets||[];let a="";const r=te("client"),s=r.inputs[r.handler]?.output.path;return s||Y(s,"Could not find client entry in vinxi manifest"),t.assets.push({tag:"script",attrs:{type:"module",suppressHydrationWarning:!0,async:!0},children:`${a}import("${s}")`}),e}function re(){const e=ne();return{...e,routes:Object.fromEntries(Object.entries(e.routes).map(([t,a])=>{const{preloads:r,assets:s}=a;return[t,{preloads:r,assets:s}]}))}}const ae="/_build/assets/app-CgnIGb9_.css";function u(...e){return D(k(e))}function oe({className:e,children:t,viewport:a=!0,...r}){return f(h.Root,{"data-slot":"navigation-menu","data-viewport":a,className:u("group/navigation-menu relative flex max-w-max flex-1 items-center justify-center",e),...r,children:[t,a&&n(se,{})]})}function w({className:e,...t}){return n(h.List,{"data-slot":"navigation-menu-list",className:u("group flex flex-1 list-none items-center justify-center gap-1",e),...t})}function _({className:e,...t}){return n(h.Item,{"data-slot":"navigation-menu-item",className:u("relative",e),...t})}A("group inline-flex h-9 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=open]:hover:bg-accent data-[state=open]:text-accent-foreground data-[state=open]:focus:bg-accent data-[state=open]:bg-accent/50 focus-visible:ring-ring/50 outline-none transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1");function se({className:e,...t}){return n("div",{className:u("absolute top-full left-0 isolate z-50 flex justify-center"),children:n(h.Viewport,{"data-slot":"navigation-menu-viewport",className:u("origin-top-center bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border shadow md:w-[var(--radix-navigation-menu-viewport-width)]",e),...t})})}function ie(){return f(oe,{className:"flex justify-between max-w-full p-4 bg-slate-50 shadow-md",children:[n(w,{children:n(_,{children:n(N,{to:"/",className:"rounded-xl p-2 hover:bg-slate-100 text-xl text-cyan-600",children:"ðŸŒ Travia"})})}),n(w,{children:n(_,{})})]})}const S=P({head:()=>({meta:[{charSet:"utf-8"},{name:"viewport",content:"width=device-width, initial-scale=1"},{title:"Travia"}],links:[{rel:"stylesheet",href:ae}]}),component:ce});function ce(){return n(de,{children:n(E,{})})}function de({children:e}){return f("html",{children:[n("head",{children:n(M,{})}),f("body",{children:[n(ie,{}),n("main",{className:"p-4 flex gap-4 flex-wrap",children:e}),n(O,{})]})]})}async function le(e,t,a){var r;const s=t[0];if(G(s)&&s.method){const o=s,p=o.data instanceof FormData?"formData":"payload",g=new Headers({...p==="payload"?{"content-type":"application/json",accept:"application/json"}:{},...o.headers instanceof Headers?Object.fromEntries(o.headers.entries()):o.headers});if(o.method==="GET"){const c=I({payload:l.stringify({data:o.data,context:o.context})});c&&(e.includes("?")?e+=`&${c}`:e+=`?${c}`)}e.includes("?")?e+="&createServerFn":e+="?createServerFn",o.response==="raw"&&(e+="&raw");const C=await a(e,{method:o.method,headers:g,signal:o.signal,...ue(o)}),v=await R(C);if((r=v.headers.get("content-type"))!=null&&r.includes("application/json")){const c=l.decode(await v.json());if(J(c)||L(c)||c instanceof Error)throw c;return c}return v}const i=await R(await a(e,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)})),d=i.headers.get("content-type");return d&&d.includes("application/json")?l.decode(await i.json()):i.text()}function ue(e){return e.method==="POST"?e.data instanceof FormData?(e.data.set("__TSR_CONTEXT",l.stringify(e.context)),{body:e.data}):{body:l.stringify({data:e.data??null,context:e.context})}:{}}async function R(e){if(!e.ok){const t=e.headers.get("content-type");throw t&&t.includes("application/json")?l.decode(await e.json()):new Error(await e.text())}return e}function pe(e){return e.replace(/^\/|\/$/g,"")}const j=(e,t)=>{const a=`/${pe(t)}/${e}`;return Object.assign((...s)=>le(a,s,async(i,d)=>{d.headers=x(Q(),d.headers);const o=await $fetch.native(i,d),p=X(),g=x(o.headers,p.___ssrRpcResponseHeaders);return p.___ssrRpcResponseHeaders=g,o}),{url:a,functionId:e})},me=()=>import("./index-BoS0TYVI.js"),fe=j("app_routes_index_tsx--getCount_createServerFn_handler","/_server"),he=W({method:"GET"}).handler(fe);j("app_routes_index_tsx--updateCount_createServerFn_handler","/_server");const T=H("/")({component:$(me,"component",()=>T.ssr),loader:async()=>await he()}),ge=T.update({id:"/",path:"/",getParentRoute:()=>S}),ve={IndexRoute:ge},xe=S._addFileChildren(ve)._addFileTypes();function ye(){return z({routeTree:xe,scrollRestoration:!0})}const Me=K({createRouter:ye,getRouterManifest:re})(q);export{T as R,j as a,u as c,Me as h};
